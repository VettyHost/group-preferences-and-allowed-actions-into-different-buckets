<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Settings & Permissions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }

        /* --- TOGGLE SWITCH CSS --- */
        .toggle-checkbox {
            appearance: none;
            display: none;
        }
        
        .toggle-label {
            width: 36px;
            height: 20px;
            background: #cbd5e1;
            border-radius: 9999px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .toggle-label::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease-in-out;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .toggle-checkbox:checked + .toggle-label {
            background-color: #3b82f6;
        }

        .toggle-checkbox:checked + .toggle-label::after {
            transform: translateX(16px);
        }

        /* --- SCROLLBAR --- */
        .tabs-container::-webkit-scrollbar {
            height: 4px;
        }
        .tabs-container::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }

        .bucket-card {
            transition: all 0.2s ease;
        }
        .bucket-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .section-header-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        /* Disabled Input Styling */
        input:disabled, select:disabled {
            background-color: #f8fafc; /* Slate-50 */
            color: #94a3b8; /* Slate-400 */
            border-color: transparent;
            cursor: not-allowed;
        }
        
        /* Active Input Styling (when unlocked) */
        input:not(:disabled), select:not(:disabled) {
            background-color: #ffffff;
            border-color: #3b82f6; /* Blue-500 */
        }

        /* Highlight Class for Search */
        .highlight-orange {
            background-color: #fdba74; /* Orange-300 */
            color: #fff7ed;
            padding: 0 2px;
            border-radius: 2px;
            color: #7c2d12;
        }
    </style>
</head>
<body class="text-slate-800 pb-20">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <h1 class="text-lg font-bold text-slate-700">Client Settings</h1>
                <span class="text-slate-300">|</span>
                <p class="text-sm text-slate-500">Managing: <span class="font-semibold text-slate-800">AutoCompany Inc.</span></p>
            </div>
            <div class="flex items-center gap-3">
                <button class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-bell"></i></button>
                <div class="h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-xs">AD</div>
            </div>
        </div>
    </header>

    <!-- Tabs -->
    <div class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-20">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="tabs-container flex space-x-6 overflow-x-auto whitespace-nowrap py-3">
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Client Account</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Manage Users</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Departments</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Location</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Links</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Customization</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Verifications</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Candidates</a>
                <a href="#" class="text-sm font-bold text-blue-600 border-b-2 border-blue-600 pb-2.5 -mb-3">Preference</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">ATS</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Packages</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Ala Carte</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Integrations</a>
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-blue-600">Tags</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-slate-800">Configuration Buckets</h2>
            <div class="flex gap-3">
                 <div class="relative">
                    <i class="fa-solid fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"></i>
                    <input type="text" id="searchInput" placeholder="Search By" class="pl-10 pr-4 py-2 bg-white border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm w-64 shadow-sm">
                </div>
                <button id="saveAllBtn" class="bg-slate-800 text-white px-5 py-2 rounded-lg text-sm font-medium hover:bg-slate-700 shadow-sm transition-colors duration-200">
                    <i class="fa-solid fa-floppy-disk mr-2"></i>Save All Changes
                </button>
            </div>
        </div>

        <!-- Vertical Stack -->
        <div class="flex flex-col gap-6" id="bucketsContainer">

            <!-- BUCKET 1: APPLICANT JOURNEY & CANDIDATE MANAGEMENT -->
            <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-blue-100 text-blue-600"><i class="fa-solid fa-user-check"></i></div>
                    <h3 class="font-bold text-slate-800">1. Applicant Journey & Candidate Management</h3>
                </div>
                <div class="p-5">
                    <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <!-- Perm Items -->
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Export Candidates</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Add Candidate</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Applicant Actions</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Applicant Activity</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Applicant Profile</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Verified Profile</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Withdraw/Re-activate</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Edit Custom Field</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Add Tags</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Assignee</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Candidate Listing</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Customize Verifs</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Default ATS User</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Kiosk Mode</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Manage Direct Link</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Add Addt'l Address</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Add Mock Data</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                    <div class="space-y-3">
                        <!-- Pref Row -->
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Client Email Comm.</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">SSN Exception Alert</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Select...</option><option>Yes</option><option>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Onboarding Notification</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Select...</option><option>Yes</option><option>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Candidate Survey</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Custom Defined Field</div>
                            <div class="col-span-5">
                                <input disabled type="text" placeholder="Blank" class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                         <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Form I-9 Preference</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Mandatory</option><option>Optional</option><option>Hide</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUCKET 2: HEALTH & SCREENING -->
            <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-emerald-100 text-emerald-600"><i class="fa-solid fa-heart-pulse"></i></div>
                    <h3 class="font-bold text-slate-800">2. Health & Screening (OHS/Labs/Drug)</h3>
                </div>
                <div class="p-5">
                    <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Add Clinic Pref v2</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Modify Health Order</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">OHS Map View</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">OHS OneService</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Health Details</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Update Drug Results</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Supplies & Shipping</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                         <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Prices</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                    <div class="space-y-3">
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Support Phone</div>
                            <div class="col-span-5">
                                <input disabled type="text" placeholder="(555) 000-0000" class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">OccHealth Location</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Candidate</option><option>Client</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Health Screening Flags</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Donor Pass Expiry</div>
                            <div class="col-span-5">
                                <input disabled type="number" value="5" class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                         <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Search Radius (miles)</div>
                            <div class="col-span-5">
                                <input disabled type="number" value="50" class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">eScreen Flow Control</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>API</option><option>SSO</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUCKET 3: ANALYTICS, REPORTING & DASHBOARDING -->
            <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-purple-100 text-purple-600"><i class="fa-solid fa-chart-pie"></i></div>
                    <h3 class="font-bold text-slate-800">3. Analytics & Reporting</h3>
                </div>
                <div class="p-5">
                    <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Adjudication</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Candidate Exp.</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Comm. Eff.</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Finance</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Geography</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Chart Overview</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Order Status Report</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Hist. Dash</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                         <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Bullhorn Intelli</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                     <div class="space-y-3">
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">BG Report Download</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Check Status Report</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUCKET 4: COMPLIANCE, LEGAL & INTEGRATIONS -->
            <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-amber-100 text-amber-600"><i class="fa-solid fa-scale-balanced"></i></div>
                    <h3 class="font-bold text-slate-800">4. Compliance, Legal & Integrations</h3>
                </div>
                <div class="p-5">
                     <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Initiate Adverse</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Init Pre-Adverse</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Only Mode</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Onboarding Docs</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Customize Invite</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">ATS Partner Int.</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">API Mgmt List</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">I-9 Audit Trail</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                     <div class="space-y-3">
                         <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Preference Email</div>
                            <div class="col-span-5">
                                <input disabled type="email" value="support@vetty.co" class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Death Master Flag</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Share Alias Address</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUCKET 5: BILLING, FINANCE & PRICING -->
             <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-green-100 text-green-600"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                    <h3 class="font-bold text-slate-800">5. Billing, Finance & Pricing</h3>
                </div>
                <div class="p-5">
                    <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Show Charge Table</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Annual Salary</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">View Package List</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Show Invoices</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                     <div class="space-y-3">
                         <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Invoice Mail Attach</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Blank</option><option>Package</option><option>Summary</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Candidate Charge Table</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BUCKET 6: USER MANAGEMENT -->
             <div class="bucket-card bg-white rounded-xl shadow-sm border border-slate-200">
                <div class="p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3">
                    <div class="section-header-icon bg-indigo-100 text-indigo-600"><i class="fa-solid fa-users-gear"></i></div>
                    <h3 class="font-bold text-slate-800">6. User Management & System</h3>
                </div>
                <div class="p-5">
                    <!-- Permissions -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Allowed Actions</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-4 mb-6">
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Setting Manage Users</span><input type="checkbox" class="toggle-checkbox" checked><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">Customize Logo</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">All Permissions</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                        <div class="flex items-center justify-between searchable-item"><span class="text-xs text-slate-700">1Service Redesign</span><input type="checkbox" class="toggle-checkbox"><label class="toggle-label" onclick="this.previousElementSibling.click()"></label></div>
                    </div>

                    <!-- Preferences -->
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 border-t border-slate-100 pt-3">Preferences</h4>
                     <div class="space-y-3">
                         <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Admin Email Note</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option selected>Yes</option><option>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                        <div class="grid grid-cols-12 gap-4 items-center pref-row">
                            <div class="col-span-5 text-xs font-medium text-slate-700 searchable-text">Preference Tags</div>
                            <div class="col-span-5">
                                <select disabled class="w-full text-xs border border-slate-300 rounded bg-white p-1.5 focus:ring-2 focus:ring-blue-500 focus:outline-none transition"><option>Yes</option><option selected>No</option></select>
                            </div>
                            <div class="col-span-2 text-right"><button class="text-xs text-blue-600 hover:text-blue-800 font-medium edit-btn">Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- 1. Edit/Unlock Functionality ---
        const editButtons = document.querySelectorAll('.edit-btn');
        const saveAllBtn = document.getElementById('saveAllBtn');
        
        editButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                // Find the closest parent row
                const row = this.closest('.pref-row');
                const input = row.querySelector('input, select');
                
                // Unlock for Editing
                if (input.disabled) {
                    input.disabled = false;
                    input.focus();
                    
                    // Hide the Edit button while editing (per user request)
                    this.style.visibility = 'hidden'; 
                }
            });
        });

        // --- 2. Save All Changes Functionality ---
        saveAllBtn.addEventListener('click', function() {
            // Find all enabled inputs within pref-rows
            const enabledInputs = document.querySelectorAll('.pref-row input:not(:disabled), .pref-row select:not(:disabled)');
            
            // Loop through them and lock them
            enabledInputs.forEach(input => {
                input.disabled = true;
                
                // Find the corresponding edit button and show it again
                const row = input.closest('.pref-row');
                const btn = row.querySelector('.edit-btn');
                if(btn) {
                    btn.style.visibility = 'visible';
                    btn.textContent = 'Edit'; // Ensure text is reset
                    btn.classList.remove('text-green-600', 'hover:text-green-800'); // Reset colors if changed
                    btn.classList.add('text-blue-600', 'hover:text-blue-800');
                }
            });

            // Feedback
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fa-solid fa-check mr-2"></i>Saved!';
            this.classList.remove('bg-slate-800', 'hover:bg-slate-700');
            this.classList.add('bg-green-600', 'hover:bg-green-700');
            
            setTimeout(() => {
                this.innerHTML = originalText;
                this.classList.add('bg-slate-800', 'hover:bg-slate-700');
                this.classList.remove('bg-green-600', 'hover:bg-green-700');
            }, 2000);
        });

        // --- 3. Search & Highlight Functionality ---
        const searchInput = document.getElementById('searchInput');
        const searchItems = document.querySelectorAll('.searchable-item span, .searchable-text');

        // Store original text to restore later
        searchItems.forEach(el => {
            el.dataset.originalText = el.textContent;
        });

        searchInput.addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase().trim();

            searchItems.forEach(el => {
                const originalText = el.dataset.originalText;
                
                if (term.length > 0 && originalText.toLowerCase().includes(term)) {
                    // Highlight Match using HTML replacement
                    // Case insensitive regex
                    const regex = new RegExp(`(${term})`, 'gi');
                    el.innerHTML = originalText.replace(regex, '<span class="highlight-orange">$1</span>');
                } else {
                    // Restore original
                    el.textContent = originalText;
                }
            });
        });
    </script>
</body>
</html>
